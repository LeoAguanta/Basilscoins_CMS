angular.module("rbGrid",[]).directive("repeatDone",function(){return{link:function(n,t,i){if(n.$last)switch(i.repeatDone){case"setPinnedFillerWidth":setTimeout(function(){t.parent().parent().parent().parent().parent().parent().find(".rbGrid-pinned-filler").width(t.parent().parent().parent().parent().parent().parent().find(".rbGrid-pinned-container").width())},100);break;case"setStickyFillerWidth":t.parent().parent().parent().find(".rbGrid-sticky-filler").width(t.parent().parent().parent().find(".rbGrid-pinned-container").width())}}}}).directive("setStickyPinnedMinWidth",[function(){return{link:function(n,t,i){var r=n.tblOptions.HasMultiSelect==!0||n.tblOptions.HasDelete==!0||n.tblOptions.HasOpenIcon==!0?1:0,u=n.tblOptions.PinnedColumns.length>0?!0:!1;$(window).resize(function(){t.parent().parent().parent().find(".rbGrid-pinned-container").find(".rbGrid-column").each(function(n,u){if(n=n-r,parseInt(i.setStickyPinnedMinWidth)==n){var f=$(u).width();t.width(f)}})});t.parent().parent().parent().find(".rbGrid-pinned-container").find(".rbGrid-column").each(function(n,u){if(n=n-r,parseInt(i.setStickyPinnedMinWidth)==n){var f=$(u).width();t.css("min-width",f)}})}}}]).directive("setStickyMinWidth",[function(){return{link:function(n,t,i){var r=n.tblOptions.HasMultiSelect==!0||n.tblOptions.HasDelete==!0||n.tblOptions.HasOpenIcon==!0?1:0,u=n.tblOptions.PinnedColumns.length>0?!0:!1;$(window).resize(function(){t.parent().parent().parent().find(".rbGrid-column-container").find(".rbGrid-column").each(function(n,f){if(u||(n=n-r),parseInt(i.setStickyMinWidth)==n){var e=$(f).width();t.width(e)}})});t.parent().parent().parent().find(".rbGrid-column-container").find(".rbGrid-column").each(function(n,f){if(u||(n=n-r),parseInt(i.setStickyMinWidth)==n){var e=$(f).width();t.css("min-width",e)}})}}}]).directive("rbGridResize",[function(){return{link:function(n,t,i){t.on("mousedown",function(r){var e=parseInt(i.colIdx),c=n.tblOptions.HasMultiSelect==!0||n.tblOptions.HasDelete==!0||n.tblOptions.HasOpenIcon==!0?1:0,v=n.tblOptions.PinnedColumns.length>0?!0:!1,u=null,f=null,o,s,h,l,a;parseInt(i.rbGridResize)==1?(e=e+c,u=$(t.parent().parent().parent().parent().parent().find(".rbGrid-pinned-container").children()[e]),f=t.parent().parent()):parseInt(i.rbGridResize)==2?(v||(e=e+c),e+=n.tblOptions.PinnedColumns.length>0?1:0,u=$(t.parent().parent().parent().parent().parent().find(".rbGrid-column-container").children()[e+(n.tblOptions.PinnedColumns.length==0?0:n.tblOptions.PinnedColumns.length-1)]),f=t.parent().parent(),console.log(u,t.parent().parent())):u=t.parent().parent();u.attr("origwidth")==undefined?(u.attr("origwidth",u.width()),u.css("minWidth",u.width()),f!=null&&(f.attr("origwidth",parseFloat(u.attr("origwidth"))),f.css("minWidth",parseFloat(u.attr("origwidth"))))):(u.css("minWidth",parseFloat(u.attr("origwidth"))),f!=null&&(f.css("minWidth",parseFloat(u.attr("origwidth"))),f.width(u.width())));o=!1;o=!0;s=r.pageX;h=u.width();f!=null&&(l=r.pageX,a=f.width());$(document).mousemove(function(n){if(o){h+(n.pageX-s)<parseFloat(u.attr("origwidth"))?u.width(parseFloat(u.attr("origwidth"))):u.width(h+(n.pageX-s)+1);u.addClass("rbGrid-resize-border");f!=null&&(f.width(a+(n.pageX-l)),f.addClass("rbGrid-resize-border"));var i=t.parent().parent().parent().parent().parent();i.find(".rbGrid-pinned-filler").width(i.find(".rbGrid-pinned-container").width());i.find(".rbGrid-sticky-filler").width(i.find(".rbGrid-sticky-pinned").width())}});$(document).mouseup(function(){o&&(o=!1,u.removeClass("rbGrid-resize-border"),f!=null&&f.removeClass("rbGrid-resize-border"))})})}}}]);